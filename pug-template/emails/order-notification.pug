extends layout.pug

block content
  h2 New Order Alert

  p A new order has been created:

  table(style="width: 100%; border-collapse: collapse; margin: 20px 0;")
    tr
      th(style="text-align: left; padding: 8px; border-bottom: 1px solid #ddd;") Client
      td(style="padding: 8px; border-bottom: 1px solid #ddd;") #{user.firstName} #{user.lastName}

    tr
      th(style="text-align: left; padding: 8px; border-bottom: 1px solid #ddd;") Product(s)
      td(style="padding: 8px; border-bottom: 1px solid #ddd;") #{order.items}

    tr
      th(style="text-align: left; padding: 8px; border-bottom: 1px solid #ddd;") Order Date & Time
      td(style="padding: 8px; border-bottom: 1px solid #ddd;")
        | #{order.dateFormatted} at #{order.timeFormatted}

    tr
      th(style="text-align: left; padding: 8px; border-bottom: 1px solid #ddd;") Contact
      td(style="padding: 8px; border-bottom: 1px solid #ddd;")
        | Phone: #{user.phone}
        br
        | Email: #{user.email}

    if order.deliveryMethod && (order.deliveryMethod.toLowerCase().includes('postnet') || order.deliveryMethod.toLowerCase().includes('paxi'))
      tr
        th(style="text-align: left; padding: 8px; border-bottom: 1px solid #ddd;") Pickup Method
        td(style="padding: 8px; border-bottom: 1px solid #ddd;") #{order.deliveryMethod}
    else if order.shippingAddress
      tr
        th(style="text-align: left; padding: 8px; border-bottom: 1px solid #ddd;") Shipping Address
        td(style="padding: 8px; border-bottom: 1px solid #ddd;")
          | #{order.shippingAddress.street}, #{order.shippingAddress.city}, #{order.shippingAddress.state}, #{order.shippingAddress.country} #{order.shippingAddress.postal_code}


  p.
    Please review this order in the admin panel to process payment or arrange shipping.

  a(
    href=`${siteUrl}/admin/orders`,
    style='display: inline-block; padding: 12px 24px; background-color: #4CAF50; color: #ffffff !important; text-decoration: none; border-radius: 4px; font-weight: 500;'
  ) View in Admin Panel
